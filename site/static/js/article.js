NodeList.prototype.forEach||(NodeList.prototype.forEach=function(t,e){for(var n=0,i=this.length;n<i;++n)t.call(e,this[n],n,this)});var modal=function(t){t.refs={};for(var e=t.getElementsByTagName("div"),n=0;n<e.length;n++){var i=e[n].getAttribute("ref");i&&(t.refs[i]=e[n])}return handlers={close:function(){for(i in t.refs)t.refs[i].innerHTML="";t.style.display="none"},open:function(e){var n=new XMLHttpRequest,i=t.refs;n.onload=function(){if(200==this.status){handlers.close();var e=JSON.parse(this.responseText);i.close.innerHTML="Close",i.title.innerHTML=e.name,i.image.innerHTML='<img src="'+e.image+'"/>',e.summary.split("\n\n").forEach(function(t){i.content.innerHTML+="<p>"+t+"</p>"}),i.links.innerHTML+='<a href="https://en.wikipedia.org/wiki/'+e.name+'" target="_blank">on wikipedia</a>',e.slug&&(i.links.innerHTML+='<a href="http://www.politifact.com/personalities/'+e.slug+'" target="_blank">on politifact</a>'),e.data_table.forEach(function(t){i.data.innerHTML+='<div class="modal-data-item">\t\t\t\t\t\t\t\t\t\t\t\t\t<div>'+t.key+"</div>\t\t\t\t\t\t\t\t\t\t\t\t\t<div>"+t.value+"</div>\t\t\t\t\t\t\t\t\t\t\t\t</div>"}),t.style.display="flex"}else console.log(this.status)},n.open("GET","/annotations?name="+e,!0),n.send()}},handlers}(document.getElementById("js-modal-annotation")),annotations=function(t){if(t){for(var e=!0,n=0;n<t.length;n++)t[n].addEventListener("click",function(t){e&&modal.open(this.getAttribute("name"))});var i={disable:function(){e=!1;for(var n=0;n<t.length;n++)t[n].classList.remove("highlight")},enable:function(){e=!0;for(var n=0;n<t.length;n++)t[n].classList.add("highlight")}};return i.enable(),i}}(document.getElementsByClassName("annotation"));!function(t,e){t&&t.addEventListener("mouseup",function(){var t=window.getSelection();if(!t.isCollapsed&&1==t.rangeCount){var n=t.getRangeAt(0);e&&n&&(e.value=n.toString())}})}(document.getElementById("js-capture-selection"),document.getElementById("js-add-selection")),function(t){t&&(t.innerHTML=(new Date).getFullYear())}(document.getElementById("js-year")),function(t,e){var n=[];[].push.apply(n,t.getElementsByTagName("div"));var i={open_menu:function(){e.classList.add("open")},close_menu:function(){e.classList.remove("open")}};n.forEach(function(t){t.addEventListener("click",function(t){this.classList.contains("current")||(n.forEach(function(t){t.classList.remove("current")}),this.classList.add("current"),i[this.getAttribute("run")]())})})}(document.getElementById("js-mobile-menu"),document.getElementById("js-menu")),function(t){t&&(t.id in sessionStorage&&("false"!=sessionStorage.getItem(t.id)?(t.classList.add("active-toggle"),annotations.enable()):(t.classList.remove("active-toggle"),annotations.disable())),t.addEventListener("click",function(){this.classList.toggle("active-toggle")?(annotations.enable(),window.sessionStorage.setItem(this.id,!0)):(annotations.disable(),window.sessionStorage.setItem(this.id,!1))}))}(document.getElementById("eye-toggle")),function(t){for(var e=0;e<t.length;e++){var n=t[e].getAttribute("tooltip");console.log(n)}}(document.querySelectorAll("[tooltip]"));