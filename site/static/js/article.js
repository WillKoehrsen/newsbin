var modal=function(t){t.refs={};for(var e=t.getElementsByTagName("div"),n=0;n<e.length;n++){var a=e[n].getAttribute("ref");a&&(t.refs[a]=e[n])}return handlers={close:function(){for(a in t.refs)t.refs[a].innerHTML="";t.style.display="none"},open:function(e){var n=new XMLHttpRequest,a=t.refs;n.onload=function(){if(200==this.status){var e=JSON.parse(this.responseText);a.close.innerHTML="Close",a.title.innerHTML=e.name,a.image.innerHTML='<img src="'+e.image+'"/>',e.summary.split("\n\n").forEach(function(t){a.content.innerHTML+="<p>"+t+"</p>"}),a.links.innerHTML+='<a href="https://en.wikipedia.org/wiki/'+e.name+'" target="_blank">on wikipedia</a>',e.slug&&(a.links.innerHTML+='<a href="http://www.politifact.com/personalities/'+e.slug+'" target="_blank">on politifact</a>'),e.data_table.forEach(function(t){a.data.innerHTML+='<div class="modal-data-item">\t\t\t\t\t\t\t\t\t\t\t\t\t<div>'+t.key+"</div>\t\t\t\t\t\t\t\t\t\t\t\t\t<div>"+t.value+"</div>\t\t\t\t\t\t\t\t\t\t\t\t</div>"}),t.style.display="flex"}else console.log(this.status)},n.open("GET","/annotations?name="+e,!0),n.send()}},handlers}(document.getElementById("js-modal-annotation")),annotations=document.getElementsByClassName("annotation");if(annotations)for(var i=0;i<annotations.length;i++)annotations[i].addEventListener("click",function(t){modal.open(this.getAttribute("name"))});var content=document.getElementById("js-capture-selection");content&&content.addEventListener("mouseup",function(){var t=window.getSelection();if(!t.isCollapsed&&1==t.rangeCount){var e=t.getRangeAt(0),n=document.getElementById("js-add-selection");n&&e&&(n.value=e.toString())}}),menu_tab=document.getElementById("js-tab-menu"),article_tab=document.getElementById("js-tab-article"),menu_form=document.getElementById("js-sidebar-anno-menu"),menu_tab&&menu_tab.addEventListener("click",function(t){this.classList.toggle("current")?(article_tab.classList.remove("current"),menu_form.classList.add("open")):(article_tab.classList.add("current"),menu_form.classList.remove("open"))}),article_tab&&article_tab.addEventListener("click",function(t){this.classList.toggle("current")?(menu_tab.classList.remove("current"),menu_form.classList.remove("open")):(menu_tab.classList.add("current"),menu_form.classList.add("open"))});