<!DOCTYPE html>
<html>
	<head>
		<title>newsbin</title>
		<link rel="stylesheet" type="text/css" href="/static/css/newsbin.css" />
		<meta name="viewport" content="width=device-width, initial-scale=1">
	</head>
	<body>
		<div id="container">
			<form id="options">

				<div class="block">
					<div id="sources">
						Sources<br/>
						<div id="choices" style="left:0;">
							{% if requested_all %}<input id="all_check" type="checkbox" name="all" include="source_check" checked/> All<br/>
							{% else %}<input id="all_check" type="checkbox" name="all" include="source_check" /> All<br/>{% endif %}
							<div><span>C</span></div>
							{% if 'cnn' in sources %}<input class="source_check" type="checkbox" name="cnn" checked/> CNN<br/>
							{% else %}<input class="source_check" type="checkbox" name="cnn" /> CNN<br/>{% endif %}
							{% if 'cnbc' in sources %}<input class="source_check" type="checkbox" name="cnbc" checked/> CNBC<br/>
							{% else %}<input class="source_check" type="checkbox" name="cnbc" /> CNBC<br/>{% endif %}
							<div><span>F</span></div>
							{% if 'foxnews' in sources %}<input class="source_check" type="checkbox" name="foxnews" checked/> Fox News<br/>
							{% else %}<input class="source_check" type="checkbox" name="foxnews" /> Fox News<br/>{% endif %}
							<div><span>N</span></div>
							{% if 'nytimes' in sources %}<input class="source_check" type="checkbox" name="nytimes" checked/> New York Times<br/>
							{% else %}<input class="source_check" type="checkbox" name="nytimes" /> New York Times<br/>{% endif %}
							<div><span>R</span></div>
							{% if 'reuters' in sources %}<input class="source_check" type="checkbox" name="reuters" checked/> Reuters<br/>
							{% else %}<input class="source_check" type="checkbox" name="reuters" /> Reuters<br/>{% endif %}
							<div><span>W</span></div>
							{% if 'washingtonpost' in sources %}<input class="source_check" type="checkbox" name="washingtonpost" checked/> Washington Post<br/>
							{% else %}<input class="source_check" type="checkbox" name="washingtonpost" /> Washington Post<br/>{% endif %}
						</div>
					</div>
				</div>

				<div class="block" style="flex:2;">
					<div id="results">
						{% if results %}Number (max 1000): <input id="count" type="number" name="results" min="1" max="1000" value="{{ results }}" />
						{% else %}Number (max 1000): <input id="count" type="number" name="results" min="1" max="1000" value="100" />{% endif %}
					</div>
				</div>

				<div class="block" style="flex:3;">
					<div id="searches">
						{% if search %}<input id="search" type="text" name="search" placeholder="Search" value="{{ search }}" />
						{% else %}<input id="search" type="text" name="search" placeholder="Search" />{% endif %}
						{% if regex %}
						&nbsp;<input class="regex_check" id="reg_check" exclude="regex_check" type="checkbox" name="regex" checked/> regex
						&nbsp;<input class="regex_check" id="pla_check" exclude="regex_check" type="checkbox" name="plain"/> plain
						{% else %}
						&nbsp;<input class="regex_check" id="reg_check" exclude="regex_check" type="checkbox" name="regex"/> regex
						&nbsp;<input class="regex_check" id="pla_check" exclude="regex_check" type="checkbox" name="plain" checked/> plain
						{% endif %}
					</div>
				</div>

				<div class="block">
					<div id="information">
						<a href="/about">about</a> |
						<a href="/log" target="_blank">log</a>
					</div>
				</div>

				<div class="block">
					<input id='submit' type="submit" value="Apply" />
				</div>

			</form>


			<div id="bottom-container">
				{% for article in articles %}
					<div class="title">
						<a href="/article?id={{ article.id }}" target="_blank">{{article.source}}: {{ article.title }}</a>
					</div>
				{% endfor %}
			</div>

			<script>
				function check_handler(){
					var include = this.getAttribute('include');
					var exclude = this.getAttribute('exclude');

					if(include){
						var targets = document.getElementsByClassName(include);
						for( var i = 0; i < targets.length; i++ ){
							targets[i].checked = this.checked;
						}
					}

					if(exclude){
						var targets = document.getElementsByClassName(exclude);
						for( var i = 0; i < targets.length; i++ ){
							if(targets[i]!=this){
								targets[i].checked = !this.checked;
							}
						}
					}
				}
				document.getElementById('all_check').addEventListener('change',check_handler);
				document.getElementById('reg_check').addEventListener('change',check_handler);
				document.getElementById('pla_check').addEventListener('change',check_handler);
			</script>
		</div>
	</body>
</html>
